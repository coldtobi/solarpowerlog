## NOTE ##
Solarpowerlog now has an own simulator embedded, which replaced the netcat
based one. Scroll down for the instructions of the old scripts.

To use the simulator, make sure you configured solarpowerlog with
 ./configure --enable-sputniksimulator
as this debug-feature is by default disabled.

In the example_confs directory the file solarpowerlog_simulator.conf, shows
how to configure the simulator.

The simulator also has the possiblity to offer a control server. This allows
setting the values the simulator will return as well as turning commands off
an on.

To set a value, you write to the ctrl server in this syntax:
<token>=<value>[,value2][;<token2>=<value3>[,<value4>]](...)
where token are the tokens of the sputnik inverter
(for example the PIN, power installed)

Examples:
PIN=2500
TNF=49.95
if a command has more than one value, you write
SYS=20004,0
if you want to set more than one value at a time you can say:
PIN=2500;SYS=20004,0
to disable the answering of PIN, say
PIN=off
and reenable it with
PIN=on

NB: Scaling of the values is done by the simulator, so just punch in the values
you want.

You can also feed complete sputnik telegrams into the control server
to parse it directly, but it must include everything including the {..}
or otherwise the parsing might fail (
(note: there will be no parsing regarding lenght, checksum and adresses,
so you can modify the string as you wish and it will still be accepted.)

To use the control server, connect to it via e.g telnet (if you configured to
use port 12346
 telnet localhost 12346
or push the commands via netcat:
 echo "PIN=2500" | netcat localhost 12346

Note: Strangely, with telnet the first byte is not received by solarpowerlog,
but subsequent commands work fine.

Example how to use the control server with a sputnik telegram:
echo "{01;FB;97|64:PAC=0;KHR=138E;PIN=11F8;KT0=863;KYR=1;KMT=1;KDY=1;KT0=863;UDC=80A;IDC=4;IL1=0;UL1=8F5;TKK=18;TNF=1384;SYS=4E22,0|246E}" | netcat localhost 12346




This is the now obsolete documentation of the obsolete netcat simulator
(The scripts will be removed soon)

This is a simple set of shell scripts which will "simulate" a Sputnik Inverter.
In "double quotes", because it its very simplified:
- Will wait on any incoming bytes
- Won't do any check on these
- Will answer with a static response.

Syntax:
./netcat_sputnik <port-to-use>

The example solarpowerlog.conf in this directory can be used with
./netcat_sputnik 12345

